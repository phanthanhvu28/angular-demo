<div class="page-wrapper nv-domestic-transportation">
    <div class="nv-domestic-transportation__header">
      <app-base-header
        [hasIconBack]="true"
        [hasTitle]="true"
        [title]="'New Tariff'"
        (onClickIconBack)="onBack()"
      >
        <div nv-right class="nv-flex nv-flex-wrap nv-gap-16">
          <app-base-button className="base-button--space" (click)="onExport()">
            Export
          </app-base-button>
          <app-base-button className="base-button--space" (click)="onCreate()">
            Create
          </app-base-button>
          <app-base-button
            className="base-button--primary base-button--space"
            (click)="onSubmit()"
          >
            Submit
          </app-base-button>
        </div>
      </app-base-header>
    </div>
  
    <div class="nv-domestic-transportation__subheader">
      <app-base-subheader>
        <div nv-left class="nv-flex nv-items-center">
          <div class="nv-body-12-regular nv-text-neutral-700 nv-mr-8">
            Valid Date
          </div>
          <form nz-form [formGroup]="formDate" class="nv-flex nv-flex-wrap">
            <app-base-date-picker
              size="xs"
              id="validFrom"
              formControlName="validFrom"
              class="nv-mr-4 nv-date-picker-custom"
              [nzAllowClear]="false"
              [nzDisabled]="hasTariffActive"
              [disabledAfterDate]="formDate.controls.validTo.value"
            />
            <app-base-date-picker
              size="xs"
              id="validTo"
              formControlName="validTo"
              class="nv-date-picker-custom"
              [nzAllowClear]="false"
              [disabledDate]="formDate.controls.validFrom.value"
            />
          </form>
        </div>
        <div nv-right>
          <app-base-alert-flag [list]="listAlertFlag" />
        </div>
      </app-base-subheader>
    </div>
  
    <div class="nv-domestic-transportation__table" id="js-dynamic-table-height">
      <app-base-table
        nzShowSizeChanger
        [isFiltering]="!!filterData.length"
        [nvNavConfig]="nvNavConfig"
        [nzColumns]="dataItemCells$ | async"
        [nzLoading]="loading$ | async"
        [nzData]="dataItems$ | async"
        [nzTotal]="totalItem$ | async"
        [nzPageIndex]="pageIndex$ | async"
        [nzPageSize]="pageSize$ | async"
        [nzFrontPagination]="false"
        [nzBodyRender]="customDataTemplate"
        [nzScroll]="{ y: tableHeight + 'px' }"
        (nzPageIndexChange)="changePageIndex($event)"
        (nzPageSizeChange)="changePageSize($event)"
        (nzSortOrderChange)="onSortOrderChange($event)"
        (onShowHideCols)="handleShowHideCols($event)"
      >
        <div custom-content-table-nav class="nv-flex nv-flex-wrap nv-gap-8">
          <app-base-button
            className="base-button--text nv-body-12-regular nv-text-neutral-700 btn-filter-group"
            (click)="onClickReuseMarkup()"
          >
            Reuse % markup
            <app-icon-reuse-markup class="nv-d-inherit" />
          </app-base-button>
          <app-base-button
            className="base-button--text nv-body-12-regular nv-text-neutral-700 btn-filter-group"
            (click)="onClickOpenModalChangePercentMarkup()"
          >
            Change % markup
            <app-icon-change-markup class="nv-d-inherit" />
          </app-base-button>
        </div>
  
        <ng-template
          #customDataTemplate
          let-dataRow
          let-cellKey="cellKey"
          let-cellFormater="cellFormater"
        >
          <app-base-input-number
            *ngIf="cellFormater.markup"
            size="xs"
            [nzMin]="0"
            (onBlur)="onChangeMarkup($event, dataRow)"
            [(ngModel)]="dataRow[cellKey]"
          />
          <app-base-input-number
            *ngIf="cellFormater.flat"
            size="xs"
            [nzMin]="0"
            (onBlur)="onChangeFlat($event, dataRow)"
            [(ngModel)]="dataRow[cellKey]"
          />
          <!-- <ng-container *ngIf="cellFormater.decimalNumber as decimalOptions">
            {{ dataRow[cellKey] | decimalNumber: decimalOptions }}
          </ng-container>
          <ng-container *ngIf="cellFormater.numberFormat">
            {{
              dataRow[cellKey]
                ? (dataRow[cellKey] | numberCurrency: dataRow.currency)
                : "-"
            }}
          </ng-container> -->
        </ng-template>
      </app-base-table>
    </div>
  </div>
  
  <div
    *ngIf="isVisibleModalFilter"
    class="nv-domestic-transportation__filter-modal"
  >
    <!-- <app-modal-filter-new
      [(isVisibleModalFilter)]="isVisibleModalFilter"
      (formFilter)="setFilterData($event)"
    /> -->
  </div>
  
  <div
    *ngIf="isVisibleModalChangePercentMarkup"
    class="nv-domestic-transportation__change-percent-markup-modal"
  >
    <!-- <app-modal-change-percent-markup
      [(isVisibleModalChangePercentMarkup)]="isVisibleModalChangePercentMarkup"
      (onConfirm)="getTableData()"
      [tariffId]="(newTariffData$ | async)?.tariffId"
    /> -->
  </div>
  
  <!-- <app-modal-view-change-result
    *ngIf="isVisibleModalViewChangeResult"
    [(isVisible)]="isVisibleModalViewChangeResult"
    [nzData]="listViewChangeResult"
  ></app-modal-view-change-result> -->
  